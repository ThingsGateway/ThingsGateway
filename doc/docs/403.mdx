---
id: 403
title: Dockeréƒ¨ç½²
---

import useBaseUrl from "@docusaurus/useBaseUrl";
import Tag from "@site/src/components/Tag.js";
import Highlight from '@site/src/components/Highlight.js';

:::important ç‰¹åˆ«æ³¨æ„

éªŒè¯ç ä½¿ç”¨SkiaSharpï¼Œå¦‚æœæ˜¯åœ¨ linux æœåŠ¡ä¸‹è¿è¡Œåˆ™éœ€è¦å®‰è£… libfontconfig1ï¼Œå¦‚ ubuntu çš„å®‰è£…å‘½ä»¤
```
apt-get update
apt-get -y install libfontconfig1
```
å¦‚æœæ˜¯é‡‡ç”¨ docker æ¨¡å¼è¿è¡Œï¼Œåˆ™éœ€è¦åœ¨ dockerfile ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼Œè¯¥å‘½ä»¤é€‚ç”¨äº debian å’Œ ubuntu çš„ docker
```
RUN apt-get update && apt-get -y install libfontconfig1
```
:::

:::tip `æç¤º`

 å¦‚æœéœ€è¦Runtimeä¾èµ–éƒ¨ç½²ï¼Œéœ€è¦å®‰è£…ASP.NET Core Runtimeï¼Œå¦‚æœæ˜¯ç‹¬ç«‹å‘å¸ƒéƒ¨ç½²ï¼Œåˆ™ä¸éœ€è¦å®‰è£…Runtime

 ä¸‹è½½é“¾æ¥:https://dotnet.microsoft.com/zh-cn/download/dotnet

:::


:::tip ç²¾ç®€å‘å¸ƒæ–‡ä»¶

å¦‚æœéœ€è¦ç²¾ç®€å‘å¸ƒåçš„æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯åˆ é™¤ä¸å¿…è¦çš„æ–‡ä»¶å¤¹ï¼Œå¯ä»¥ç¼–è¾‘ Web é¡¹ç›®çš„ `.csproj` å¹¶æ·»åŠ  `<SatelliteResourceLanguages>en-US</SatelliteResourceLanguages>`ï¼Œå¦‚ï¼š

```cs showLineNumbers  {3}
<PropertyGroup>
  <TargetFramework>net6.0</TargetFramework>
  <SatelliteResourceLanguages>en-US</SatelliteResourceLanguages>
</PropertyGroup>
```

è‹¥æ— éœ€ç”Ÿæˆ `.pdb` æ–‡ä»¶ï¼Œå¯ä»¥ç»§ç»­æ·»åŠ ï¼š

```cs showLineNumbers {2-3}
<PropertyGroup>
  <DebugType>none</DebugType>
  <DebugSymbols>false</DebugSymbols>
</PropertyGroup>
```

:::


## 34.2.1 å…³äº `Docker` éƒ¨ç½²

åœ¨ `Docker` ä¸­éƒ¨ç½²ç½‘ç«™æœ‰ä¸¤ç§æ–¹å¼ï¼š

- `å‘å¸ƒåæ„å»º`ï¼šæ­¤æ–¹å¼æ˜¯å…ˆå‘å¸ƒç½‘ç«™ååœ¨å†æ„å»ºé•œåƒï¼Œè¿™æ ·å¯ä»¥å‡å°‘ä¸å¿…è¦çš„æ„å»ºå±‚ï¼Œè€Œä¸”è¿˜èƒ½ç¼©å‡é•œåƒå¤§å°ã€‚**ï¼ˆæ¨èï¼‰**
- `ç¼–è¯‘+æ„å»º+å‘å¸ƒ`ï¼šä¹Ÿå°±æ˜¯è¯´åœ¨ `Dockerfile` ä¸­é…ç½®ç½‘ç«™ä»æ„å»ºåˆ°å‘å¸ƒçš„å®Œæ•´è¿‡ç¨‹ï¼Œæ­¤æ–¹å¼ä¼šé€Ÿåº¦æ…¢ï¼Œè€Œä¸”ä¼šäº§ç”Ÿå†—ä½™å±‚ï¼Œå¢åŠ é•œåƒå¤§å°ã€‚

## 34.2.2 ä¸¤ç§æ–¹å¼æ„å»º

### 34.2.2.1 å‘å¸ƒåæ„å»º


- ğŸ‘‰ ç¼–å†™ `Dockerfile`

```
FROM mcr.microsoft.com/dotnet/aspnet:6.0 AS base
COPY .  /app
WORKDIR /app
EXPOSE 80
#linuxå®‰è£…
RUN echo "deb https://mirrors.tuna.tsinghua.edu.cn/debian/ sid main contrib non-free" > /etc/apt/sources.list
RUN apt-get update && apt-get -y install libfontconfig1
ENTRYPOINT ["dotnet", "ThingsGateway.Web.Server.dll","--urls","http://*:7200"]

```



- ğŸ‘‰ å°† `Dockerfile` æ–‡ä»¶æ‹·è´åˆ°å‘å¸ƒæ ¹ç›®å½•

å°†ç¼–å†™å¥½çš„ `Dockerfile` æ–‡ä»¶ï¼ˆæ³¨æ„ `D` å¤§å†™ï¼‰æ‹·è´åˆ°å‘å¸ƒç½‘ç«™çš„æ ¹ç›®å½•ä¸‹ã€‚

:::tip `æç¤º`

gitä»“åº“ä¸­å·²ç»åŒ…å« `Dockerfile` æ–‡ä»¶

:::

- ğŸ‘‰ æ„å»º `Docker` é•œåƒ

åœ¨ç½‘ç«™å‘å¸ƒåçš„è·¯å¾„æ ¹ç›®å½•ä¸‹ï¼ˆå¿…é¡»å« `Dockerfile`ï¼‰æ‰“å¼€ `CMD/PowerShell` åªéœ€æ„å»ºå‘½ä»¤ï¼š

```bash showLineNumbers
docker build -t ç½‘ç«™åç§°:ç½‘ç«™ç‰ˆæœ¬å· .
```

:::important ç‰¹åˆ«æ³¨æ„

åç«¯çš„ `.` ä¸èƒ½çœç•¥

:::

- ğŸ‘‰ å¯åŠ¨é•œåƒ

```bash showLineNumbers
docker run --name å®¹å™¨åç§° -p 5000:80 --restart=always -d ç½‘ç«™åç§°:ç½‘ç«™ç‰ˆæœ¬å·
```

:::caution `.NET8` ä¸­ `80` ç«¯å£é—®é¢˜

åœ¨ä½¿ç”¨ `.NET8`ï¼Œé»˜è®¤çš„ç«¯å£ç”±åŸæ¥çš„ `80` ç«¯å£å˜æˆäº† `8080`ã€‚[æŸ¥çœ‹ç›¸å…³è¯´æ˜](https://learn.microsoft.com/zh-cn/dotnet/core/compatibility/containers/8.0/aspnet-port)

:::


- ğŸ‘‰ åœ¨ `Dockerfile` æ‰€åœ¨è·¯å¾„æ„å»º

æ¥ä¸‹æ¥çš„æ­¥éª¤å’Œä¸Šè¿°æ­¥éª¤ä¸€è‡´ï¼Œä¸å†é‡å¤ç¼–å†™ã€‚